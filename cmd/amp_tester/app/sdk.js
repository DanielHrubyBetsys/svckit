window.minus5=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n){var t={publish:0,subscribe:1,request:2,response:3,ping:4,pong:5,alive:6},o={diff:0,full:1,append:2,update:3,close:4},r={t:"type",i:"correlationID",e:"error",c:"errorSource",u:"uri",s:"ts",p:"updateType",b:"subscriptions"};function i(e){var n=e.split("\n"),i=null;try{i=function(e){var n={type:t.publish,updateType:o.diff};for(var i in r){var u=r[i];void 0!==e[i]&&(n[u]=e[i])}return n}(JSON.parse(n[0]))}catch(e){return null}if(n.length>1&&n[1])try{var u=JSON.parse(n[1]);i.body=u}catch(e){}return i}e.exports={messageType:t,updateType:o,unpack:function(e){if(!e)return null;for(var n=e.split("\n\n"),t=[],o=0;o<n.length;o++){var r=i(n[o]);t[o]=r}return t},unpackMsg:i,pack:function(e){var n={},t=e.body;for(var o in r){var i=r[o];void 0!==e[i]&&(n[o]=e[i])}var u=JSON.stringify(n);return t&&(u+="\n",u+=JSON.stringify(t)),u},ping:function(e){return{type:t.ping,ts:e||(new Date).getTime()}},pong:function(){return{type:t.pong}}}},function(e,n){var t={application:0,transport:1};function o(e,n,o){return{error:n,msg:o,isTransport:e==t.transport,isApplication:e==t.application}}e.exports={pooling:function(e,n){var r="code: "+e+", "+n;return o(t.transport,r)},ws:function(e){return o(t.transport,e)},server:function(e){var n=e?e.error:"";return o(e&&void 0!==e.errorSource?e.errorSource:t.application,n,e&&e.body)}}},function(e,n,t){var o=t(0),r=t(5),i={},u=null;function s(){var e={};for(var n in i)e[n]=i[n].ts;return{type:o.messageType.subscribe,subscriptions:e}}function a(){null!=u&&u(s())}e.exports={add:function(e,n){var t=i[e];void 0===t?(t={key:e,ts:0,handlers:[],full:null,diff:null},i[e]=t,a()):n(t.full,null),t.handlers.push(n)},remove:function(e,n){var t=i[e];if(void 0!==t){var o=t.handlers.indexOf(n);o>-1&&t.handlers.splice(o,1),0===t.handlers.length&&(delete i[e],a())}},publish:function(e){var n=e.uri,t=i[n];if(t){if(e.updateType===o.updateType.close)return delete i[n],void t.handlers.forEach(function(e){e(null,null)});t.ts=e.ts,e.updateType!==o.updateType.full&&e.updateType!==o.updateType.append&&e.updateType!==o.updateType.update||(t.full=e.body,t.diff=null),e.updateType===o.updateType.diff&&(t.full||(t.full={}),t.diff=e.body,r(t.full,e.body)),t.handlers.forEach(function(e){e(t.full,t.diff)})}else console.log("topic not found",n)},message:s,init:function(e){u=e}}},function(e,n,t){(function(e){var t=["responseType","withCredentials","timeout","onprogress"];function o(e,n,t){e[n]=e[n]||t}n.ajax=function(n,r){var i=n.headers||{},u=n.body,s=n.method||(u?"POST":"GET"),a=!1,c=function(n){if(n&&e.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent))return new XDomainRequest;if(e.XMLHttpRequest)return new XMLHttpRequest}(n.cors);function l(e,n){return function(){a||(r(void 0===c.status?e:c.status,0===c.status?"Error":c.response||c.responseText||n,c),a=!0)}}c.open(s,n.url,!0);var f=c.onload=l(200);c.onreadystatechange=function(){4===c.readyState&&f()},c.onerror=l(null,"Error"),c.ontimeout=l(null,"Timeout"),c.onabort=l(null,"Abort"),u&&(o(i,"X-Requested-With","XMLHttpRequest"),e.FormData&&u instanceof e.FormData||o(i,"Content-Type","application/x-www-form-urlencoded"));for(var p=0,d=t.length;p<d;p++)void 0!==n[v=t[p]]&&(c[v]=n[v]);for(var v in i)c.setRequestHeader(v,i[v]);return c.send(u),c}}).call(this,t(9))},function(e,n,t){"use strict";t.r(n),t.d(n,"api",function(){return h});var o=t(0),r=t(2),i=t(6),u=t(7),s=t(8),a=t(10),c=void 0,l={current:void 0,previous:void 0,ws:void 0,pooling:void 0,onChange:function(){},ready:()=>!!l.current,name:function(e){return e===l.ws?"ws":e===l.pooling?"pooling":"none"},send:function(e,n){(l.current||l.pooling).send(e,n)}},f={default:function(e){console.error(e)},ignore:function(e){}};function p(e,n){n=n||f.default,l.send(e,n)}function d(e){l.ready()&&p(e=e||r.message(),f.ignore)}function v(e){if(!e)return!1;for(var n=o.unpack(e),t=!1,u=0;u<n.length;u++){var s=n[u];if(null===s)return t;switch(s.type){case o.messageType.publish:r.publish(s);break;case o.messageType.response:i.response(s);break;case o.messageType.alive:break;case o.messageType.ping:p(o.pong(),f.ignore);break;case o.messageType.pong:t=!0}}return t}function g(e,n,t,o){t=t||function(){},o=o||f.default,p(i.request(e,n,t,o),o)}function y(e){l.previous=l.current,l.current=e.success?l.ws:l.pooling,(l.current===l.ws&&e.connected||l.current===l.pooling)&&d(),l.previous===l.pooling&&l.current===l.ws&&l.pooling.stop(),e.connected?c.info(e):c.error(e),l.onChange({transport:l.name(l.current),previousTransport:l.name(l.previous),status:e})}var m={port:function(){return""===location.port||"80"===location.port?"":":"+location.port},path:function(){var e=location.pathname,n=e.substring(0,e.lastIndexOf("/")+1);return 0===n.length&&(n="/"),n},ws:()=>("https:"===location.protocol?"wss://":"ws://")+location.hostname+m.port()+m.path()+"api",log:function(){return location.protocol+"//"+location.hostname+m.port()+m.path()+"log"},pooling:function(){return location.protocol+"//"+location.hostname+m.port()+m.path()+"pooling"},forcePooling:function(){return location.search.search("forcePooling")>-1}};function h(e){return c=s.init(m.log()),l.onChange=function(n){if(e)try{e(n)}catch(e){console.error(e)}},l.pooling=a.init(m.pooling(),v),m.forcePooling()?l.current=l.pooling:l.ws=u.init(m.ws(),v,y),r.init(d),{request:g,subscribe:r.add,unSubscribe:r.remove}}},function(e,n){function t(e){if(void 0!==e._list)return e._list;var n=[];for(var t in e){var o=e[t];"object"==typeof o&&0!==t.indexOf("_")&&n.push(o)}return n.sort(function(e,n){return void 0===e.order&&(e.order=0),void 0===n.order&&(n.order=0),e.order!==n.order?e.order-n.order:e.name>n.name?1:e.name<n.name?-1:0}),e._list=n,n}e.exports=function(e,n){!function e(n,t){for(var o in t){var r=t[o];if(null!=r)if("object"!=typeof r){var i=n[o];n[o]=r,void 0!==i&&r!==i&&(n["_"+o+"Change"]={previous:i,changedAt:(new Date).getTime()})}else{void 0===n[o]&&(n[o]={});var u=n._collection;r._isStruct&&(u=n);var s=n[o];s._collection=n,s._parent=u,s._key=o,delete s._list,e(s,r)}else delete n[o],delete n["_"+o+"Change"]}}(e,n),function e(n){for(var o in n){var r=n[o];if("object"==typeof r&&0!==o.indexOf("_")){if(!0===r._isMap){var i=r;n[o+"List"]=function(){return t(i)}}e(r)}}}(e)}},function(e,n,t){var o=t(0),r=t(1),i=0,u={};e.exports={request:function(e,n,t,r){i++;var s={type:o.messageType.request,uri:e,correlationID:i,body:n};return u[i]={ok:t,fail:r},s},response:function(e){var n=u[e.correlationID];delete u[e.correlationID],e.error?n.fail(r.server(e)):n.ok(e.body)}}},function(e,n,t){"use strict";t.r(n),t.d(n,"init",function(){return g});var o=t(0),r=t(1);function i(){return(new Date).getTime()}var u=null,s="",a=function(){},c=function(){},l={timer:void 0,schedule:function(e){l.timer=setTimeout(e,16e3)},clear:function(){clearTimeout(l.timer)},onMessage:function(e){e&&l.clear()},start:function(){l.schedule(function(){u.readyState==WebSocket.OPEN&&(p.event("pongTimeout"),u.close())})}},f={timer:void 0,no:0,lastMessage:0,afterPongInterval:16e3,beforePongInterval:4e3,interval:4e3,clear:function(){clearTimeout(f.timer)},start:function(){f.interval=f.beforePongInterval,f.lastMessage=0,f.loop()},loop:function(){i()-f.lastMessage>f.interval/2&&(f.no++,d(o.ping(f.no),function(e){p.event("pingError",e)})),f.timer=setTimeout(f.loop,f.interval)},onMessage:function(e){f.lastMessage=i(),e&&(f.interval=f.afterPongInterval)}},p={success:!1,opened:!1,fallback:!1,giveup:!1,connected:!1,supported:!1,start:i(),startConnect:i(),messages:0,connects:0,retries:0,events:[],onMessage:function(e){p.messages++,e&&!p.connected&&(p.event("pong"),p.success=!0,p.connected=!0,p.retries=p.connects,p.change())},event:function(e,n){var t={name:e,sinceStart:i()-p.start,sinceConnect:i()-p.startConnect};n&&(n.code&&(t.code=n.code),n.type&&(t.type=n.type),n.reason&&(t.reason=n.reason),n.message&&(t.message=n.message),n.name&&(t.name=n.name),t.error=n.toString()),p.events.push(t)},change:function(){a(p)},shouldQuit:function(){return p.connects++,p.startConnect=i(),!p.success&&(p.connects>32?(p.giveup=!0,p.change(),!0):(5===p.connects&&(p.fallback=!0,p.change()),!1))},connectInterval:function(){var e=p.connects||1;return e>12&&(e=12),Math.pow(2,e)}};function d(e,n){function t(e,t,o){n(r.ws(t)),p.event("sendError"+e,o)}if(u)if(u.readyState===WebSocket.OPEN){var i=o.pack(e);try{u.send(i)}catch(e){t(3,e.toString(),e)}}else t(2,"connection closed readyState: "+u.readyState);else t(1,"connection uninitialized")}function v(){if(!p.shouldQuit()){try{u=new WebSocket(s)}catch(n){return e(),void p.event("wsError",n)}u.onopen=function(){p.opened=!0,l.start(),f.start(),p.event("open")},u.onclose=function(n){e(),p.event("close",n)},u.onmessage=function(e){var n=c(e.data);p.onMessage(n),f.onMessage(n),l.onMessage(n)}}function e(){l.clear(),f.clear(),setTimeout(v,p.connectInterval()),p.connected=!1}}function g(e,n,t){if(s=e,a=function(e){try{t(e)}catch(e){console.log(e)}},c=function(e){try{return n(e)}catch(e){console.log(e)}return!1},p.supported="WebSocket"in window&&null!=window.WebSocket,p.supported)return v(),{send:d};a()}},function(e,n,t){"use strict";t.r(n),t.d(n,"init",function(){return i});var o=t(3);function r(e,n,t,r){o.ajax({url:e,method:"POST",body:JSON.stringify(n)},function(e,n){e>=200&&e<300||console.error(e,n)})}function i(e){return{info:function(n){r(e+"/info",n)},error:function(n){r(e+"/error",n)}}}},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,n,t){"use strict";t.r(n),t.d(n,"init",function(){return d});var o,r=t(2),i=t(0),u=t(1),s=t(3),a={},c=void 0,l=!1;function f(e,n,t){var r=i.pack(e);s.ajax({url:o,method:"POST",body:r},function(e,o){e>=200&&e<300?n(o):t(u.pooling(e,o))})}function p(e,n){e.type!=i.messageType.subscribe?f(e,c,n):function e(n){for(var t in n.subscriptions)if(void 0===a[t]){var o=n.subscriptions[t];a[t]=o;var u={type:i.messageType.subscribe,subscriptions:{}};u.subscriptions[t]=o,f(u,function(n){delete a[t],n&&c(n),l||e(r.message())},function(n,o){delete a[t],n>=400&&n<500||(console.error(n,o),l||setTimeout(function(){e(r.message())},4e3))})}}(e)}function d(e,n){return o=e,c=n,{send:p,stop:function(){l=!0}}}}]);